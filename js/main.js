!function(t){function e(t){t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(t,e,i,a){return e+e+i+i+a+a});var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}function i(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function a(){return i()+i()+"-"+i()+"-"+i()+"-"+i()+"-"+i()+i()+i()}var s={},n=function(e,i){this.element=e,this.container,this.timer=null,this.data={text_elements:{Days:null,Hours:null,Minutes:null,Seconds:null},attributes:{canvas:null,context:null,item_size:null,line_width:null,radius:null,outer_radius:null},state:{fading:{Days:!1,Hours:!1,Minutes:!1,Seconds:!1}}},this.listeners=[],this.config=null,this.setOptions(i),this.container=t("<div>"),this.container.addClass("time_circles"),this.container.appendTo(this.element),this.data.attributes.canvas=t("<canvas>"),this.data.attributes.context=this.data.attributes.canvas[0].getContext("2d");var a=this.element.offsetHeight,s=this.element.offsetWidth;0===a&&s>0?a=s/4:0===s&&a>0&&(s=4*a),this.data.attributes.canvas[0].height=a,this.data.attributes.canvas[0].width=s,this.data.attributes.canvas.appendTo(this.container),this.data.attributes.item_size=Math.min(this.data.attributes.canvas[0].width/4,this.data.attributes.canvas[0].height),this.data.attributes.line_width=this.data.attributes.item_size*this.config.fg_width,this.data.attributes.radius=(.8*this.data.attributes.item_size-this.data.attributes.line_width)/2,this.data.attributes.outer_radius=this.data.attributes.radius+.5*Math.max(this.data.attributes.line_width,this.data.attributes.line_width*this.config.bg_width);var n=0;for(var r in this.data.text_elements){var o=t("<div>");o.addClass("textDiv_"+r),o.css("top",Math.round(.35*this.data.attributes.item_size)),o.css("left",Math.round(n++*this.data.attributes.item_size)),o.css("width",this.data.attributes.item_size),o.appendTo(this.container);var h=t("<h4>");h.text(this.config.time[r].text),h.css("font-size",Math.round(.07*this.data.attributes.item_size)),h.css("line-height",Math.round(.07*this.data.attributes.item_size)+"px"),h.appendTo(o);var d=t("<span>");d.css("font-size",Math.round(.21*this.data.attributes.item_size)),d.css("line-height",Math.round(.07*this.data.attributes.item_size)+"px"),d.appendTo(o),this.data.text_elements[r]=d}this.config.start&&this.start()};n.prototype.updateArc=function(){var t,e,i=1e3*this.config.refresh_interval,a=new Date;if(this.config.count_past_zero){var s=a-i;t=Math.abs(a-this.data.attributes.ref_date)/1e3,e=Math.abs(this.data.attributes.ref_date-s)/1e3}else t=Math.max(this.data.attributes.ref_date-a,0)/1e3,e=t+(a>this.data.attributes.ref_date)?0:i;var n={Days:t/60/60/24,Hours:t/60/60%24,Minutes:t/60%60,Seconds:t%60},r={Days:n.Days/365,Hours:n.Hours/24,Minutes:n.Minutes/60,Seconds:n.Seconds/60},o={Days:e/60/60/24,Hours:e/60/60%24,Minutes:e/60%60,Seconds:e%60},h=0,d=null;for(var u in n){this.data.text_elements[u].text(Math.floor(n[u]));var c=h*this.data.attributes.item_size+this.data.attributes.item_size/2,l=this.data.attributes.item_size/2,f=this.config.time[u].color;Math.floor(n[u])!==Math.floor(o[u])&&this.notifyListeners(u,Math.floor(n[u]),Math.floor(t)),null!==d&&(Math.floor(n[d])>Math.floor(o[d])?(this.radialFade(c,l,f,1,u),this.data.state.fading[u]=!0):Math.floor(n[d])<Math.floor(o[d])&&(this.radialFade(c,l,f,0,u),this.data.state.fading[u]=!0)),this.data.state.fading[u]||this.drawArc(c,l,f,r[u]),d=u,h++}},n.prototype.drawArc=function(t,e,i,a){var s=Math.max(this.data.attributes.outer_radius,this.data.attributes.item_size/2);this.data.attributes.context.clearRect(t-s,e-s,2*s,2*s),this.config.use_background&&(this.data.attributes.context.beginPath(),this.data.attributes.context.arc(t,e,this.data.attributes.radius,0,2*Math.PI,!1),this.data.attributes.context.lineWidth=this.data.attributes.line_width*this.config.bg_width,this.data.attributes.context.strokeStyle=this.config.circle_bg_color,this.data.attributes.context.stroke());var n=-.5*Math.PI,r=-.5*Math.PI+2*a*Math.PI;this.data.attributes.context.beginPath(),this.data.attributes.context.arc(t,e,this.data.attributes.radius,n,r,!1),this.data.attributes.context.lineWidth=this.data.attributes.line_width,this.data.attributes.context.strokeStyle=i,this.data.attributes.context.stroke()},n.prototype.radialFade=function(t,i,a,s,n){var r,o=e(a),h=this,d=.2*(1===s?-1:1);for(r=0;s<=1&&s>=0;r++)!function(){var e="rgba("+o.r+", "+o.g+", "+o.b+", "+Math.round(10*s)/10+")";setTimeout(function(){h.drawArc(t,i,e,1)},50*r)}(),s+=d;setTimeout(function(){h.data.state.fading[n]=!1},50*r)},n.prototype.timeLeft=function(){var t=new Date;return(this.data.attributes.ref_date-t)/1e3},n.prototype.start=function(){var e=t(this.element).data("date");if("string"==typeof e)e.match(/^[0-9]{4}-[0-9]{2}-[0-9]{2}\s[0-9]{1,2}:[0-9]{2}:[0-9]{2}$/).length>0&&(e=e.replace(" ","T")),this.data.attributes.ref_date=Date.parse(e);else{var i=t(this.element).attr("data-timer");"string"==typeof i?(this.data.attributes.timer=parseFloat(i),t(this.element).removeAttr("data-timer")):"string"==typeof this.config.timer?(this.data.attributes.timer=parseFloat(this.config.timer),this.config.timer=null):"number"==typeof this.config.timer&&(this.data.attributes.timer=a.config.timer,this.config.timer=null),"number"==typeof this.data.attributes.timer?this.data.attributes.ref_date=(new Date).getTime()+1e3*this.data.attributes.timer:this.data.attributes.ref_date=this.config.ref_date}var a=this;this.timer=setInterval(function(){a.updateArc()},1e3*this.config.refresh_interval)},n.prototype.stop=function(){"number"==typeof this.data.attributes.timer&&(this.data.attributes.timer=this.timeLeft(this)),clearInterval(this.timer)},n.prototype.destroy=function(){this.stop(),this.container.remove(),t(this.element).removeData("tc-id")},n.prototype.setOptions=function(e){null===this.config&&(this.default_options.ref_date=new Date,this.config=t.extend(!0,{},this.default_options)),t.extend(!0,this.config,e)},n.prototype.addListener=function(t){"function"==typeof t&&this.listeners.push(t)},n.prototype.notifyListeners=function(t,e,i){for(var a=0;a<this.listeners.length;a++)this.listeners[a](t,e,i)},n.prototype.default_options={ref_date:new Date,start:!0,refresh_interval:.1,count_past_zero:!0,circle_bg_color:"#60686F",use_background:!0,fg_width:.08,bg_width:1,time:{Days:{show:!0,text:"Дней",color:"#FC0"},Hours:{show:!0,text:"Часов",color:"#FC0"},Minutes:{show:!0,text:"Минут",color:"#FC0"},Seconds:{show:!0,text:"Секунд",color:"#FC0"}}};var r=function(t,e){this.elements=t,this.options=e,this.foreach()};r.prototype.foreach=function(e){var i=this;return this.elements.each(function(){var r,o=t(this).data("tc-id");if(void 0===o&&(o=a(),t(this).data("tc-id",o)),void 0===s[o]){var h=t(this).data("options"),d=i.options;"object"==typeof h&&(d=t.extend(!0,{},i.options,h)),r=new n(this,d),s[o]=r}else r=s[o],void 0!==i.options&&r.setOptions(i.options);"function"==typeof e&&e(r)}),this},r.prototype.start=function(){return this.foreach(function(t){t.start()}),this},r.prototype.stop=function(){return this.foreach(function(t){t.stop()}),this},r.prototype.addListener=function(t){return this.foreach(function(e){e.addListener(t)}),this},r.prototype.destroy=function(){return this.foreach(function(t){t.destroy()}),this},r.prototype.end=function(){return this.elements},t.fn.TimeCircles=function(t){return new r(this,t)}}(jQuery),$(document).ready(function(){$("nav a").each(function(){this.href==document.URL&&$(this).addClass("b-menu_current")}),$(".nav-menu_items").click(function(){window.innerWidth<725&&$(".nav-menu_items li").slideToggle()}),$(".show-menu-aside").click(function(){$(".left-aside").toggle(300),$(".menu-aside-arrowd svg").toggleClass("rotate_90")}),$(".show-mobile-order button").click(function(){$(".left-aside-order").slideToggle()}),$(window).scroll(function(){$(this).scrollTop()>453?$(".left-aside-order").css({position:"fixed",top:"0px"}):$(".left-aside-order").css({position:"static"})}),$(".form-order-consultation").submit(function(){var t=$(this).find("input[name=phone]").val();if(regV=/^([+]?[0-9\s-\(\)]{5,25})*$/i,!regV.test(t))return alert("Некорректный номер телефона"),!1;var e=$(this).find("input[name=fio]").val(),i=/^[а-яА-ЯёЁa-zA-Z -]+$/;return e.length<2?(alert("Имя не меньше двух символов"),!1):e.length>31?(alert("Имя не больше 30 символов"),!1):i.test(e)?void 0:(alert("Имя должно содержать только русские или латинские буквы, тире - "),!1)}),$("#left-form_aside").submit(function(){var t=$("#left-aside__input-phone").val();if(regV=/^([+]?[0-9\s-\(\)]{5,25})*$/i,!regV.test(t)||""==t)return alert("Некорректный номер телефона"),!1;var e=$(this).find("input[name=fio]").val(),i=/^[а-яА-ЯёЁa-zA-Z -]+$/;return e.length<2?(alert("Имя не меньше двух символов"),!1):e.length>31?(alert("Имя не больше 30 символов"),!1):i.test(e)?$(this).find("input[name=service]").length>100?(alert("Услуга не более 100 символов"),!1):$(this).find("input[name=site]").length>100?(alert("Название сайта не более 100 символов"),!1):void 0:(alert("Имя должно содержать только русские или латинские буквы, тире - "),!1)});var t={scaleColor:!1,trackColor:"#fc0",barColor:"#979797",lineWidth:6,lineCap:"butt",size:95};window.addEventListener("DOMContentLoaded",function(){var e=[];[].forEach.call(document.querySelectorAll(".chart"),function(i){e.push(new EasyPieChart(i,t))})});var e=$(".someTimer").TimeCircles();$(".fadeIn").click(function(){e.elements.last().fadeIn()}),$(".fadeOut").click(function(){e.elements.last().fadeOut()}),$(".startTimer").click(function(){$(".someTimer").eq(1).TimeCircles().start()}),$(".stopTimer").click(function(){$(".someTimer").eq(1).TimeCircles().stop()})});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiJCIsImhleFRvUmdiIiwiaGV4IiwicmVwbGFjZSIsIm0iLCJyIiwiZyIsImIiLCJyZXN1bHQiLCJleGVjIiwicGFyc2VJbnQiLCJzNCIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsInRvU3RyaW5nIiwic3Vic3RyaW5nIiwiZ3VpZCIsIlRDX0luc3RhbmNlX0xpc3QiLCJUQ19JbnN0YW5jZSIsImVsZW1lbnQiLCJvcHRpb25zIiwidGhpcyIsImNvbnRhaW5lciIsInRpbWVyIiwiZGF0YSIsInRleHRfZWxlbWVudHMiLCJEYXlzIiwiSG91cnMiLCJNaW51dGVzIiwiU2Vjb25kcyIsImF0dHJpYnV0ZXMiLCJjYW52YXMiLCJjb250ZXh0IiwiaXRlbV9zaXplIiwibGluZV93aWR0aCIsInJhZGl1cyIsIm91dGVyX3JhZGl1cyIsInN0YXRlIiwiZmFkaW5nIiwibGlzdGVuZXJzIiwiY29uZmlnIiwic2V0T3B0aW9ucyIsImFkZENsYXNzIiwiYXBwZW5kVG8iLCJnZXRDb250ZXh0IiwiaGVpZ2h0Iiwib2Zmc2V0SGVpZ2h0Iiwid2lkdGgiLCJvZmZzZXRXaWR0aCIsIm1pbiIsImZnX3dpZHRoIiwibWF4IiwiYmdfd2lkdGgiLCJpIiwia2V5IiwidGV4dEVsZW1lbnQiLCJjc3MiLCJyb3VuZCIsImhlYWRlckVsZW1lbnQiLCJ0ZXh0IiwidGltZSIsIm51bWJlckVsZW1lbnQiLCJzdGFydCIsInByb3RvdHlwZSIsInVwZGF0ZUFyYyIsImRpZmYiLCJvbGRfZGlmZiIsImludGVydmFsIiwicmVmcmVzaF9pbnRlcnZhbCIsImN1ckRhdGUiLCJEYXRlIiwiY291bnRfcGFzdF96ZXJvIiwicHJldkRhdGUiLCJhYnMiLCJyZWZfZGF0ZSIsInBjdCIsIm9sZF90aW1lIiwibGFzdEtleSIsIngiLCJ5IiwiY29sb3IiLCJub3RpZnlMaXN0ZW5lcnMiLCJyYWRpYWxGYWRlIiwiZHJhd0FyYyIsImNsZWFyX3JhZGl1cyIsImNsZWFyUmVjdCIsInVzZV9iYWNrZ3JvdW5kIiwiYmVnaW5QYXRoIiwiYXJjIiwiUEkiLCJsaW5lV2lkdGgiLCJzdHJva2VTdHlsZSIsImNpcmNsZV9iZ19jb2xvciIsInN0cm9rZSIsInN0YXJ0QW5nbGUiLCJlbmRBbmdsZSIsImZyb20iLCJyZ2IiLCJfdGhpcyIsInN0ZXAiLCJyZ2JhIiwic2V0VGltZW91dCIsInRpbWVMZWZ0Iiwibm93IiwiYXR0cl9kYXRhX2RhdGUiLCJtYXRjaCIsImxlbmd0aCIsInBhcnNlIiwiYXR0cl9kYXRhX3RpbWVyIiwiYXR0ciIsInBhcnNlRmxvYXQiLCJyZW1vdmVBdHRyIiwiZ2V0VGltZSIsInNldEludGVydmFsIiwic3RvcCIsImNsZWFySW50ZXJ2YWwiLCJkZXN0cm95IiwicmVtb3ZlIiwicmVtb3ZlRGF0YSIsImRlZmF1bHRfb3B0aW9ucyIsImV4dGVuZCIsImFkZExpc3RlbmVyIiwiZiIsInB1c2giLCJ1bml0IiwidmFsdWUiLCJ0b3RhbCIsInNob3ciLCJUQ19DbGFzcyIsImVsZW1lbnRzIiwiZm9yZWFjaCIsImNhbGxiYWNrIiwiZWFjaCIsImluc3RhbmNlIiwiY3VyX2lkIiwiZWxlbWVudF9vcHRpb25zIiwiZW5kIiwiZm4iLCJUaW1lQ2lyY2xlcyIsImpRdWVyeSIsImRvY3VtZW50IiwicmVhZHkiLCJocmVmIiwiVVJMIiwiY2xpY2siLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwic2xpZGVUb2dnbGUiLCJ0b2dnbGUiLCJ0b2dnbGVDbGFzcyIsInNjcm9sbCIsInNjcm9sbFRvcCIsInBvc2l0aW9uIiwidG9wIiwic3VibWl0IiwicGhvbmUiLCJmaW5kIiwidmFsIiwicmVnViIsInRlc3QiLCJhbGVydCIsIm5hbWUiLCJyZWciLCJzY2FsZUNvbG9yIiwidHJhY2tDb2xvciIsImJhckNvbG9yIiwibGluZUNhcCIsInNpemUiLCJhZGRFdmVudExpc3RlbmVyIiwiY2hhcnRzIiwiZm9yRWFjaCIsImNhbGwiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZWwiLCJFYXN5UGllQ2hhcnQiLCJ0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UyxHQUNic0QsTUFBTSxnQ0FDQyxHQUVSQyxFQUFLdkQsT0FBUyxJQUNic0QsTUFBTSw4QkFDQyxHQUVQRSxFQUFJSCxLQUFLRSxHQUlDbEssRUFBRXNCLE1BQU11SSxLQUFLLHVCQUNoQmxELE9BQVMsS0FDaEJzRCxNQUFNLGlDQUNDLEdBRUFqSyxFQUFFc0IsTUFBTXVJLEtBQUssb0JBQ2hCbEQsT0FBUyxLQUNic0QsTUFBTSx5Q0FDQyxHQUZYLFFBVElBLE1BQU0scUVBQ0MsSUFlZixJQUFJNUksSUFDRitJLFlBQVksRUFDWkMsV0FBWSxPQUNaQyxTQUFVLFVBQ1YzRSxVQUFXLEVBQ1g0RSxRQUFTLE9BQ1RDLEtBQU0sR0FFUnRCLFFBQU91QixpQkFBaUIsbUJBQW9CLFdBQzFDLEdBQUlDLFNBQ0RDLFFBQVFDLEtBQUsvQixTQUFTZ0MsaUJBQWlCLFVBQVksU0FBU0MsR0FDN0RKLEVBQU85QyxLQUFLLEdBQUltRCxjQUFhRCxFQUFJekosT0FHckMsSUFBSTJKLEdBQWNoTCxFQUFFLGNBQWMySSxhQUdsQzNJLEdBQUUsV0FBV2lKLE1BQU0sV0FDZitCLEVBQVk5QyxTQUFTK0MsT0FBT0MsV0FFaENsTCxFQUFFLFlBQVlpSixNQUFNLFdBQ2hCK0IsRUFBWTlDLFNBQVMrQyxPQUFPRSxZQUdoQ25MLEVBQUUsZUFBZWlKLE1BQU0sV0FDbkJqSixFQUFFLGNBQWNvTCxHQUFHLEdBQUd6QyxjQUFjNUUsVUFFeEMvRCxFQUFFLGNBQWNpSixNQUFNLFdBQ2xCakosRUFBRSxjQUFjb0wsR0FBRyxHQUFHekMsY0FBY3hCIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQmFzaWMgc3RydWN0dXJlOiBUQ19DbGFzcyBpcyB0aGUgcHVibGljIGNsYXNzIHRoYXQgaXMgcmV0dXJuZWQgdXBvbiBiZWluZyBjYWxsZWRcclxuICogXHJcbiAqIFNvLCBpZiB5b3UgZG9cclxuICogICAgICB2YXIgdGMgPSAkKFwiLnRpbWVyXCIpLlRpbWVDaXJjbGVzKCk7XHJcbiAqICAgICAgXHJcbiAqIHRjIHdpbGwgY29udGFpbiBhbiBpbnN0YW5jZSBvZiB0aGUgcHVibGljIFRpbWVDaXJjbGVzIGNsYXNzLiBJdCBpcyBpbXBvcnRhbnQgdG9cclxuICogbm90ZSB0aGF0IFRpbWVDaXJjbGVzIGlzIG5vdCBjaGFpbmVkIGluIHRoZSBjb252ZW50aW9uYWwgd2F5LCBjaGVjayB0aGVcclxuICogZG9jdW1lbnRhdGlvbiBmb3IgbW9yZSBpbmZvIG9uIGhvdyBUaW1lQ2lyY2xlcyBjYW4gYmUgY2hhaW5lZC5cclxuICogXHJcbiAqIEFmdGVyIGJlaW5nIGNhbGxlZC9jcmVhdGVkLCB0aGUgcHVibGljIFRpbWVyQ2lyY2xlcyBjbGFzcyB3aWxsIHRoZW4tIGZvciBlYWNoIGVsZW1lbnRcclxuICogd2l0aGluIGl0J3MgY29sbGVjdGlvbiwgZWl0aGVyIGZldGNoIG9yIGNyZWF0ZSBhbiBpbnN0YW5jZSBvZiB0aGUgcHJpdmF0ZSBjbGFzcy5cclxuICogRWFjaCBmdW5jdGlvbiBjYWxsZWQgdXBvbiB0aGUgcHVibGljIGNsYXNzIHdpbGwgYmUgZm9yd2FyZGVkIHRvIGVhY2ggaW5zdGFuY2VcclxuICogb2YgdGhlIHByaXZhdGUgY2xhc3NlcyB3aXRoaW4gdGhlIHJlbGV2YW50IGVsZW1lbnQgY29sbGVjdGlvblxyXG4gKiovXHJcbihmdW5jdGlvbigkKSB7XHJcbiAgICAvKipcclxuICAgICAqIENvbnZlcnRzIGhleCBjb2xvciBjb2RlIGludG8gb2JqZWN0IGNvbnRhaW5pbmcgaW50ZWdlciB2YWx1ZXMgZm9yIHRoZSByLGcsYiB1c2VcclxuICAgICAqIFRoaXMgZnVuY3Rpb24gKGhleFRvUmdiKSBvcmlnaW5hdGVzIGZyb206XHJcbiAgICAgKiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzU2MjM4MzgvcmdiLXRvLWhleC1hbmQtaGV4LXRvLXJnYlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGhleCBjb2xvciBjb2RlXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGhleFRvUmdiKGhleCkge1xyXG4gICAgICAgIC8vIEV4cGFuZCBzaG9ydGhhbmQgZm9ybSAoZS5nLiBcIjAzRlwiKSB0byBmdWxsIGZvcm0gKGUuZy4gXCIwMDMzRkZcIilcclxuICAgICAgICB2YXIgc2hvcnRoYW5kUmVnZXggPSAvXiM/KFthLWZcXGRdKShbYS1mXFxkXSkoW2EtZlxcZF0pJC9pO1xyXG4gICAgICAgIGhleCA9IGhleC5yZXBsYWNlKHNob3J0aGFuZFJlZ2V4LCBmdW5jdGlvbihtLCByLCBnLCBiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByICsgciArIGcgKyBnICsgYiArIGI7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHZhciByZXN1bHQgPSAvXiM/KFthLWZcXGRdezJ9KShbYS1mXFxkXXsyfSkoW2EtZlxcZF17Mn0pJC9pLmV4ZWMoaGV4KTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0ID8ge1xyXG4gICAgICAgICAgICByOiBwYXJzZUludChyZXN1bHRbMV0sIDE2KSxcclxuICAgICAgICAgICAgZzogcGFyc2VJbnQocmVzdWx0WzJdLCAxNiksXHJcbiAgICAgICAgICAgIGI6IHBhcnNlSW50KHJlc3VsdFszXSwgMTYpXHJcbiAgICAgICAgfSA6IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBGdW5jdGlvbiBzNCgpIGFuZCBndWlkKCkgb3JpZ2luYXRlIGZyb206XHJcbiAgICAgKiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzEwNTAzNC9ob3ctdG8tY3JlYXRlLWEtZ3VpZC11dWlkLWluLWphdmFzY3JpcHRcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gczQoKSB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKDEgKyBNYXRoLnJhbmRvbSgpKSAqIDB4MTAwMDApXHJcbiAgICAgICAgICAgIC50b1N0cmluZygxNilcclxuICAgICAgICAgICAgLnN1YnN0cmluZygxKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSB1bmlxdWUgaWRcclxuICAgICAqIEByZXR1cm5zIHtTdHJpbmd9XHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGd1aWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHM0KCkgKyBzNCgpICsgJy0nICsgczQoKSArICctJyArIHM0KCkgKyAnLScgK1xyXG4gICAgICAgICAgICBzNCgpICsgJy0nICsgczQoKSArIHM0KCkgKyBzNCgpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICB2YXIgVENfSW5zdGFuY2VfTGlzdCA9IHt9O1xyXG5cclxuICAgIHZhciBUQ19JbnN0YW5jZSA9IGZ1bmN0aW9uKGVsZW1lbnQsIG9wdGlvbnMpIHtcclxuICAgICAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyO1xyXG4gICAgICAgIHRoaXMudGltZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IHtcclxuICAgICAgICAgICAgdGV4dF9lbGVtZW50czoge1xyXG4gICAgICAgICAgICAgICAgRGF5czogbnVsbCxcclxuICAgICAgICAgICAgICAgIEhvdXJzOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgTWludXRlczogbnVsbCxcclxuICAgICAgICAgICAgICAgIFNlY29uZHM6IG51bGxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYXR0cmlidXRlczoge1xyXG4gICAgICAgICAgICAgICAgY2FudmFzOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgY29udGV4dDogbnVsbCxcclxuICAgICAgICAgICAgICAgIGl0ZW1fc2l6ZTogbnVsbCxcclxuICAgICAgICAgICAgICAgIGxpbmVfd2lkdGg6IG51bGwsXHJcbiAgICAgICAgICAgICAgICByYWRpdXM6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBvdXRlcl9yYWRpdXM6IG51bGxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc3RhdGU6IHtcclxuICAgICAgICAgICAgICAgIGZhZGluZzoge1xyXG4gICAgICAgICAgICAgICAgICAgIERheXM6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIEhvdXJzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBNaW51dGVzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBTZWNvbmRzOiBmYWxzZVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmxpc3RlbmVycyA9IFtdO1xyXG4gICAgICAgIHRoaXMuY29uZmlnID0gbnVsbDtcclxuICAgICAgICB0aGlzLnNldE9wdGlvbnMob3B0aW9ucyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSAkKFwiPGRpdj5cIik7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIuYWRkQ2xhc3MoJ3RpbWVfY2lyY2xlcycpO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZFRvKHRoaXMuZWxlbWVudCk7XHJcblxyXG4gICAgICAgIHRoaXMuZGF0YS5hdHRyaWJ1dGVzLmNhbnZhcyA9ICQoXCI8Y2FudmFzPlwiKTtcclxuICAgICAgICB0aGlzLmRhdGEuYXR0cmlidXRlcy5jb250ZXh0ID0gdGhpcy5kYXRhLmF0dHJpYnV0ZXMuY2FudmFzWzBdLmdldENvbnRleHQoJzJkJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdmFyIGhlaWdodCA9IHRoaXMuZWxlbWVudC5vZmZzZXRIZWlnaHQ7XHJcbiAgICAgICAgdmFyIHdpZHRoID0gdGhpcy5lbGVtZW50Lm9mZnNldFdpZHRoO1xyXG4gICAgICAgIGlmKGhlaWdodCA9PT0gMCAmJiB3aWR0aCA+IDApIGhlaWdodCA9IHdpZHRoIC8gNDtcclxuICAgICAgICBlbHNlIGlmKHdpZHRoID09PSAwICYmIGhlaWdodCA+IDApIHdpZHRoID0gaGVpZ2h0ICogNDtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmRhdGEuYXR0cmlidXRlcy5jYW52YXNbMF0uaGVpZ2h0ID0gaGVpZ2h0O1xyXG4gICAgICAgIHRoaXMuZGF0YS5hdHRyaWJ1dGVzLmNhbnZhc1swXS53aWR0aCA9IHdpZHRoO1xyXG4gICAgICAgIHRoaXMuZGF0YS5hdHRyaWJ1dGVzLmNhbnZhcy5hcHBlbmRUbyh0aGlzLmNvbnRhaW5lcik7XHJcblxyXG4gICAgICAgIHRoaXMuZGF0YS5hdHRyaWJ1dGVzLml0ZW1fc2l6ZSA9IE1hdGgubWluKHRoaXMuZGF0YS5hdHRyaWJ1dGVzLmNhbnZhc1swXS53aWR0aCAvIDQsIHRoaXMuZGF0YS5hdHRyaWJ1dGVzLmNhbnZhc1swXS5oZWlnaHQpO1xyXG4gICAgICAgIHRoaXMuZGF0YS5hdHRyaWJ1dGVzLmxpbmVfd2lkdGggPSB0aGlzLmRhdGEuYXR0cmlidXRlcy5pdGVtX3NpemUgKiB0aGlzLmNvbmZpZy5mZ193aWR0aDtcclxuICAgICAgICB0aGlzLmRhdGEuYXR0cmlidXRlcy5yYWRpdXMgPSAoKHRoaXMuZGF0YS5hdHRyaWJ1dGVzLml0ZW1fc2l6ZSAqIDAuOCkgLSB0aGlzLmRhdGEuYXR0cmlidXRlcy5saW5lX3dpZHRoKSAvIDI7XHJcbiAgICAgICAgdGhpcy5kYXRhLmF0dHJpYnV0ZXMub3V0ZXJfcmFkaXVzID0gdGhpcy5kYXRhLmF0dHJpYnV0ZXMucmFkaXVzICsgMC41ICogTWF0aC5tYXgodGhpcy5kYXRhLmF0dHJpYnV0ZXMubGluZV93aWR0aCwgdGhpcy5kYXRhLmF0dHJpYnV0ZXMubGluZV93aWR0aCAqIHRoaXMuY29uZmlnLmJnX3dpZHRoKTtcclxuXHJcbiAgICAgICAgLy8gUHJlcGFyZSBUaW1lIEVsZW1lbnRzXHJcbiAgICAgICAgdmFyIGkgPSAwO1xyXG4gICAgICAgIGZvciAodmFyIGtleSBpbiB0aGlzLmRhdGEudGV4dF9lbGVtZW50cykge1xyXG4gICAgICAgICAgICB2YXIgdGV4dEVsZW1lbnQgPSAkKFwiPGRpdj5cIik7XHJcbiAgICAgICAgICAgIHRleHRFbGVtZW50LmFkZENsYXNzKCd0ZXh0RGl2XycgKyBrZXkpO1xyXG4gICAgICAgICAgICB0ZXh0RWxlbWVudC5jc3MoXCJ0b3BcIiwgTWF0aC5yb3VuZCgwLjM1ICogdGhpcy5kYXRhLmF0dHJpYnV0ZXMuaXRlbV9zaXplKSk7XHJcbiAgICAgICAgICAgIHRleHRFbGVtZW50LmNzcyhcImxlZnRcIiwgTWF0aC5yb3VuZChpKysgKiB0aGlzLmRhdGEuYXR0cmlidXRlcy5pdGVtX3NpemUpKTtcclxuICAgICAgICAgICAgdGV4dEVsZW1lbnQuY3NzKFwid2lkdGhcIiwgdGhpcy5kYXRhLmF0dHJpYnV0ZXMuaXRlbV9zaXplKTtcclxuICAgICAgICAgICAgdGV4dEVsZW1lbnQuYXBwZW5kVG8odGhpcy5jb250YWluZXIpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdmFyIGhlYWRlckVsZW1lbnQgPSAkKFwiPGg0PlwiKTtcclxuICAgICAgICAgICAgaGVhZGVyRWxlbWVudC50ZXh0KHRoaXMuY29uZmlnLnRpbWVba2V5XS50ZXh0KTsgLy8gT3B0aW9uc1xyXG4gICAgICAgICAgICBoZWFkZXJFbGVtZW50LmNzcyhcImZvbnQtc2l6ZVwiLCBNYXRoLnJvdW5kKDAuMDcgKiB0aGlzLmRhdGEuYXR0cmlidXRlcy5pdGVtX3NpemUpKTtcclxuICAgICAgICAgICAgaGVhZGVyRWxlbWVudC5jc3MoXCJsaW5lLWhlaWdodFwiLCBNYXRoLnJvdW5kKDAuMDcgKiB0aGlzLmRhdGEuYXR0cmlidXRlcy5pdGVtX3NpemUpICsgXCJweFwiKTtcclxuICAgICAgICAgICAgaGVhZGVyRWxlbWVudC5hcHBlbmRUbyh0ZXh0RWxlbWVudCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB2YXIgbnVtYmVyRWxlbWVudCA9ICQoXCI8c3Bhbj5cIik7XHJcbiAgICAgICAgICAgIG51bWJlckVsZW1lbnQuY3NzKFwiZm9udC1zaXplXCIsIE1hdGgucm91bmQoMC4yMSAqIHRoaXMuZGF0YS5hdHRyaWJ1dGVzLml0ZW1fc2l6ZSkpO1xyXG4gICAgICAgICAgICBudW1iZXJFbGVtZW50LmNzcyhcImxpbmUtaGVpZ2h0XCIsIE1hdGgucm91bmQoMC4wNyAqIHRoaXMuZGF0YS5hdHRyaWJ1dGVzLml0ZW1fc2l6ZSkgKyBcInB4XCIpO1xyXG4gICAgICAgICAgICBudW1iZXJFbGVtZW50LmFwcGVuZFRvKHRleHRFbGVtZW50KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHRoaXMuZGF0YS50ZXh0X2VsZW1lbnRzW2tleV0gPSBudW1iZXJFbGVtZW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuY29uZmlnLnN0YXJ0KVxyXG4gICAgICAgICAgICB0aGlzLnN0YXJ0KCk7XHJcbiAgICB9O1xyXG5cclxuICAgIFRDX0luc3RhbmNlLnByb3RvdHlwZS51cGRhdGVBcmMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgZGlmZiwgb2xkX2RpZmY7XHJcblxyXG4gICAgICAgIHZhciBpbnRlcnZhbCA9ICgxMDAwICogdGhpcy5jb25maWcucmVmcmVzaF9pbnRlcnZhbCk7XHJcbiAgICAgICAgdmFyIGN1ckRhdGUgPSBuZXcgRGF0ZSgpO1xyXG5cclxuICAgICAgICAvLyBDb21wYXJlIGN1cnJlbnQgdGltZSB3aXRoIHJlZmVyZW5jZVxyXG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy5jb3VudF9wYXN0X3plcm8pIHtcclxuICAgICAgICAgICAgdmFyIHByZXZEYXRlID0gY3VyRGF0ZSAtIGludGVydmFsO1xyXG4gICAgICAgICAgICBkaWZmID0gTWF0aC5hYnMoY3VyRGF0ZSAtIHRoaXMuZGF0YS5hdHRyaWJ1dGVzLnJlZl9kYXRlKSAvIDEwMDA7XHJcbiAgICAgICAgICAgIG9sZF9kaWZmID0gTWF0aC5hYnModGhpcy5kYXRhLmF0dHJpYnV0ZXMucmVmX2RhdGUgLSBwcmV2RGF0ZSkgLyAxMDAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgZGlmZiA9IE1hdGgubWF4KHRoaXMuZGF0YS5hdHRyaWJ1dGVzLnJlZl9kYXRlIC0gY3VyRGF0ZSwgMCkgLyAxMDAwO1xyXG4gICAgICAgICAgICBvbGRfZGlmZiA9IGRpZmYgKyAoY3VyRGF0ZSA+IHRoaXMuZGF0YS5hdHRyaWJ1dGVzLnJlZl9kYXRlKSA/IDAgOiBpbnRlcnZhbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciB0aW1lID0ge1xyXG4gICAgICAgICAgICBEYXlzOiAoZGlmZiAvIDYwIC8gNjAgLyAyNCksXHJcbiAgICAgICAgICAgIEhvdXJzOiAoZGlmZiAvIDYwIC8gNjApICUgMjQsXHJcbiAgICAgICAgICAgIE1pbnV0ZXM6IChkaWZmIC8gNjApICUgNjAsXHJcbiAgICAgICAgICAgIFNlY29uZHM6IGRpZmYgJSA2MFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIHBjdCA9IHtcclxuICAgICAgICAgICAgRGF5czogdGltZS5EYXlzIC8gMzY1LFxyXG4gICAgICAgICAgICBIb3VyczogdGltZS5Ib3VycyAvIDI0LFxyXG4gICAgICAgICAgICBNaW51dGVzOiB0aW1lLk1pbnV0ZXMgLyA2MCxcclxuICAgICAgICAgICAgU2Vjb25kczogdGltZS5TZWNvbmRzIC8gNjBcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgb2xkX3RpbWUgPSB7XHJcbiAgICAgICAgICAgIERheXM6IChvbGRfZGlmZiAvIDYwIC8gNjAgLyAyNCksXHJcbiAgICAgICAgICAgIEhvdXJzOiAob2xkX2RpZmYgLyA2MCAvIDYwKSAlIDI0LFxyXG4gICAgICAgICAgICBNaW51dGVzOiAob2xkX2RpZmYgLyA2MCkgJSA2MCxcclxuICAgICAgICAgICAgU2Vjb25kczogb2xkX2RpZmYgJSA2MFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBpID0gMDtcclxuICAgICAgICB2YXIgbGFzdEtleSA9IG51bGw7XHJcbiAgICAgICAgZm9yICh2YXIga2V5IGluIHRpbWUpIHtcclxuICAgICAgICAgICAgLy8gU2V0IHRoZSB0ZXh0IHZhbHVlXHJcbiAgICAgICAgICAgIHRoaXMuZGF0YS50ZXh0X2VsZW1lbnRzW2tleV0udGV4dChNYXRoLmZsb29yKHRpbWVba2V5XSkpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHggPSAoaSAqIHRoaXMuZGF0YS5hdHRyaWJ1dGVzLml0ZW1fc2l6ZSkgKyAodGhpcy5kYXRhLmF0dHJpYnV0ZXMuaXRlbV9zaXplIC8gMik7XHJcbiAgICAgICAgICAgIHZhciB5ID0gdGhpcy5kYXRhLmF0dHJpYnV0ZXMuaXRlbV9zaXplIC8gMjtcclxuICAgICAgICAgICAgdmFyIGNvbG9yID0gdGhpcy5jb25maWcudGltZVtrZXldLmNvbG9yO1xyXG5cclxuICAgICAgICAgICAgaWYoTWF0aC5mbG9vcih0aW1lW2tleV0pICE9PSBNYXRoLmZsb29yKG9sZF90aW1lW2tleV0pKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeUxpc3RlbmVycyhrZXksIE1hdGguZmxvb3IodGltZVtrZXldKSwgTWF0aC5mbG9vcihkaWZmKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gVE9ETzogQ2hlY2sgb3B0aW9ucyBmb3IgZmFkaW5nID09IHRydWVcclxuICAgICAgICAgICAgaWYgKGxhc3RLZXkgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGlmIChNYXRoLmZsb29yKHRpbWVbbGFzdEtleV0pID4gTWF0aC5mbG9vcihvbGRfdGltZVtsYXN0S2V5XSkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJhZGlhbEZhZGUoeCwgeSwgY29sb3IsIDEsIGtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhLnN0YXRlLmZhZGluZ1trZXldID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKE1hdGguZmxvb3IodGltZVtsYXN0S2V5XSkgPCBNYXRoLmZsb29yKG9sZF90aW1lW2xhc3RLZXldKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmFkaWFsRmFkZSh4LCB5LCBjb2xvciwgMCwga2V5KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGEuc3RhdGUuZmFkaW5nW2tleV0gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5kYXRhLnN0YXRlLmZhZGluZ1trZXldKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRyYXdBcmMoeCwgeSwgY29sb3IsIHBjdFtrZXldKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsYXN0S2V5ID0ga2V5O1xyXG4gICAgICAgICAgICBpKys7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgVENfSW5zdGFuY2UucHJvdG90eXBlLmRyYXdBcmMgPSBmdW5jdGlvbih4LCB5LCBjb2xvciwgcGN0KSB7XHJcbiAgICAgICAgdmFyIGNsZWFyX3JhZGl1cyA9IE1hdGgubWF4KHRoaXMuZGF0YS5hdHRyaWJ1dGVzLm91dGVyX3JhZGl1cywgdGhpcy5kYXRhLmF0dHJpYnV0ZXMuaXRlbV9zaXplIC8gMik7XHJcbiAgICAgICAgdGhpcy5kYXRhLmF0dHJpYnV0ZXMuY29udGV4dC5jbGVhclJlY3QoXHJcbiAgICAgICAgICAgIHggLSBjbGVhcl9yYWRpdXMsXHJcbiAgICAgICAgICAgIHkgLSBjbGVhcl9yYWRpdXMsXHJcbiAgICAgICAgICAgIGNsZWFyX3JhZGl1cyAqIDIsXHJcbiAgICAgICAgICAgIGNsZWFyX3JhZGl1cyAqIDJcclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuY29uZmlnLnVzZV9iYWNrZ3JvdW5kKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0YS5hdHRyaWJ1dGVzLmNvbnRleHQuYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0YS5hdHRyaWJ1dGVzLmNvbnRleHQuYXJjKHgsIHksIHRoaXMuZGF0YS5hdHRyaWJ1dGVzLnJhZGl1cywgMCwgMiAqIE1hdGguUEksIGZhbHNlKTtcclxuICAgICAgICAgICAgdGhpcy5kYXRhLmF0dHJpYnV0ZXMuY29udGV4dC5saW5lV2lkdGggPSB0aGlzLmRhdGEuYXR0cmlidXRlcy5saW5lX3dpZHRoICogdGhpcy5jb25maWcuYmdfd2lkdGg7XHJcblxyXG4gICAgICAgICAgICAvLyBsaW5lIGNvbG9yXHJcbiAgICAgICAgICAgIHRoaXMuZGF0YS5hdHRyaWJ1dGVzLmNvbnRleHQuc3Ryb2tlU3R5bGUgPSB0aGlzLmNvbmZpZy5jaXJjbGVfYmdfY29sb3I7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0YS5hdHRyaWJ1dGVzLmNvbnRleHQuc3Ryb2tlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgc3RhcnRBbmdsZSA9ICgtMC41ICogTWF0aC5QSSk7XHJcbiAgICAgICAgdmFyIGVuZEFuZ2xlID0gKC0wLjUgKiBNYXRoLlBJKSArICgyICogcGN0ICogTWF0aC5QSSk7XHJcbiAgICAgICAgdmFyIGNvdW50ZXJDbG9ja3dpc2UgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgdGhpcy5kYXRhLmF0dHJpYnV0ZXMuY29udGV4dC5iZWdpblBhdGgoKTtcclxuICAgICAgICB0aGlzLmRhdGEuYXR0cmlidXRlcy5jb250ZXh0LmFyYyh4LCB5LCB0aGlzLmRhdGEuYXR0cmlidXRlcy5yYWRpdXMsIHN0YXJ0QW5nbGUsIGVuZEFuZ2xlLCBjb3VudGVyQ2xvY2t3aXNlKTtcclxuICAgICAgICB0aGlzLmRhdGEuYXR0cmlidXRlcy5jb250ZXh0LmxpbmVXaWR0aCA9IHRoaXMuZGF0YS5hdHRyaWJ1dGVzLmxpbmVfd2lkdGg7XHJcblxyXG4gICAgICAgIC8vIGxpbmUgY29sb3JcclxuICAgICAgICB0aGlzLmRhdGEuYXR0cmlidXRlcy5jb250ZXh0LnN0cm9rZVN0eWxlID0gY29sb3I7XHJcbiAgICAgICAgdGhpcy5kYXRhLmF0dHJpYnV0ZXMuY29udGV4dC5zdHJva2UoKTtcclxuICAgIH07XHJcblxyXG4gICAgVENfSW5zdGFuY2UucHJvdG90eXBlLnJhZGlhbEZhZGUgPSBmdW5jdGlvbih4LCB5LCBjb2xvciwgZnJvbSwga2V5KSB7XHJcbiAgICAgICAgLy8gVE9ETzogTWFrZSBmYWRlX3RpbWUgb3B0aW9uXHJcbiAgICAgICAgdmFyIHJnYiA9IGhleFRvUmdiKGNvbG9yKTtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzOyAvLyBXZSBoYXZlIGEgZmV3IGlubmVyIHNjb3BlcyBoZXJlIHRoYXQgd2lsbCBuZWVkIGFjY2VzcyB0byBvdXIgaW5zdGFuY2VcclxuXHJcbiAgICAgICAgdmFyIHN0ZXAgPSAwLjIgKiAoKGZyb20gPT09IDEpID8gLTEgOiAxKTtcclxuICAgICAgICB2YXIgaTtcclxuICAgICAgICBmb3IgKGkgPSAwOyBmcm9tIDw9IDEgJiYgZnJvbSA+PSAwOyBpKyspIHtcclxuICAgICAgICAgICAgLy8gQ3JlYXRlIGlubmVyIHNjb3BlIHNvIG91ciB2YXJpYWJsZXMgYXJlIG5vdCBjaGFuZ2VkIGJ5IHRoZSB0aW1lIHRoZSBUaW1lb3V0IHRyaWdnZXJzXHJcbiAgICAgICAgICAgIChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHZhciByZ2JhID0gXCJyZ2JhKFwiICsgcmdiLnIgKyBcIiwgXCIgKyByZ2IuZyArIFwiLCBcIiArIHJnYi5iICsgXCIsIFwiICsgKE1hdGgucm91bmQoZnJvbSAqIDEwKSAvIDEwKSArIFwiKVwiO1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5kcmF3QXJjKHgsIHksIHJnYmEsIDEpO1xyXG4gICAgICAgICAgICAgICAgfSwgNTAgKiBpKTtcclxuICAgICAgICAgICAgfSgpKTtcclxuICAgICAgICAgICAgZnJvbSArPSBzdGVwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5kYXRhLnN0YXRlLmZhZGluZ1trZXldID0gZmFsc2U7XHJcbiAgICAgICAgfSwgNTAgKiBpKTtcclxuICAgIH07XHJcblxyXG4gICAgVENfSW5zdGFuY2UucHJvdG90eXBlLnRpbWVMZWZ0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIG5vdyA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgcmV0dXJuICgodGhpcy5kYXRhLmF0dHJpYnV0ZXMucmVmX2RhdGUgLSBub3cpIC8gMTAwMCk7XHJcbiAgICB9O1xyXG5cclxuICAgIFRDX0luc3RhbmNlLnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIC8vIENoZWNrIGlmIGEgZGF0ZSB3YXMgcGFzc2VkIGluIGh0bWwgYXR0cmlidXRlLCBpZiBub3QsIGZhbGwgYmFjayB0byBjb25maWdcclxuICAgICAgICB2YXIgYXR0cl9kYXRhX2RhdGUgPSAkKHRoaXMuZWxlbWVudCkuZGF0YSgnZGF0ZScpO1xyXG4gICAgICAgIGlmICh0eXBlb2YgYXR0cl9kYXRhX2RhdGUgPT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICAgICAgaWYgKGF0dHJfZGF0YV9kYXRlLm1hdGNoKC9eWzAtOV17NH0tWzAtOV17Mn0tWzAtOV17Mn1cXHNbMC05XXsxLDJ9OlswLTldezJ9OlswLTldezJ9JC8pLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGF0dHJfZGF0YV9kYXRlID0gYXR0cl9kYXRhX2RhdGUucmVwbGFjZSgnICcsICdUJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5kYXRhLmF0dHJpYnV0ZXMucmVmX2RhdGUgPSBEYXRlLnBhcnNlKGF0dHJfZGF0YV9kYXRlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciBhdHRyX2RhdGFfdGltZXIgPSAkKHRoaXMuZWxlbWVudCkuYXR0cignZGF0YS10aW1lcicpO1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGF0dHJfZGF0YV90aW1lciA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhLmF0dHJpYnV0ZXMudGltZXIgPSBwYXJzZUZsb2F0KGF0dHJfZGF0YV90aW1lcik7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMuZWxlbWVudCkucmVtb3ZlQXR0cignZGF0YS10aW1lcicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiB0aGlzLmNvbmZpZy50aW1lciA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhLmF0dHJpYnV0ZXMudGltZXIgPSBwYXJzZUZsb2F0KHRoaXMuY29uZmlnLnRpbWVyKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLnRpbWVyID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgdGhpcy5jb25maWcudGltZXIgPT09IFwibnVtYmVyXCIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0YS5hdHRyaWJ1dGVzLnRpbWVyID0gX3RoaXMuY29uZmlnLnRpbWVyO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb25maWcudGltZXIgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMuZGF0YS5hdHRyaWJ1dGVzLnRpbWVyID09PSBcIm51bWJlclwiKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGEuYXR0cmlidXRlcy5yZWZfZGF0ZSA9IChuZXcgRGF0ZSgpKS5nZXRUaW1lKCkgKyAodGhpcy5kYXRhLmF0dHJpYnV0ZXMudGltZXIgKiAxMDAwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0YS5hdHRyaWJ1dGVzLnJlZl9kYXRlID0gdGhpcy5jb25maWcucmVmX2RhdGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFN0YXJ0IHJ1bm5pbmdcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMudGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHsgX3RoaXMudXBkYXRlQXJjKCk7IH0sIHRoaXMuY29uZmlnLnJlZnJlc2hfaW50ZXJ2YWwgKiAxMDAwKTtcclxuICAgIH07XHJcblxyXG4gICAgVENfSW5zdGFuY2UucHJvdG90eXBlLnN0b3AgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBpZiAodHlwZW9mIHRoaXMuZGF0YS5hdHRyaWJ1dGVzLnRpbWVyID09PSBcIm51bWJlclwiKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0YS5hdHRyaWJ1dGVzLnRpbWVyID0gdGhpcy50aW1lTGVmdCh0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gU3RvcCBydW5uaW5nXHJcbiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKTtcclxuICAgIH07XHJcblxyXG4gICAgVENfSW5zdGFuY2UucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB0aGlzLnN0b3AoKTtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lci5yZW1vdmUoKTtcclxuICAgICAgICAkKHRoaXMuZWxlbWVudCkucmVtb3ZlRGF0YSgndGMtaWQnKTtcclxuICAgIH07XHJcblxyXG4gICAgVENfSW5zdGFuY2UucHJvdG90eXBlLnNldE9wdGlvbnMgPSBmdW5jdGlvbihvcHRpb25zKSB7XHJcbiAgICAgICAgaWYodGhpcy5jb25maWcgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5kZWZhdWx0X29wdGlvbnMucmVmX2RhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLmNvbmZpZyA9ICQuZXh0ZW5kKHRydWUsIHt9LCB0aGlzLmRlZmF1bHRfb3B0aW9ucyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICQuZXh0ZW5kKHRydWUsIHRoaXMuY29uZmlnLCBvcHRpb25zKTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIFRDX0luc3RhbmNlLnByb3RvdHlwZS5hZGRMaXN0ZW5lciA9IGZ1bmN0aW9uKGYpIHtcclxuICAgICAgICBpZih0eXBlb2YgZiAhPT0gXCJmdW5jdGlvblwiKSByZXR1cm47XHJcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMucHVzaChmKTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIFRDX0luc3RhbmNlLnByb3RvdHlwZS5ub3RpZnlMaXN0ZW5lcnMgPSBmdW5jdGlvbih1bml0LCB2YWx1ZSwgdG90YWwpIHtcclxuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5saXN0ZW5lcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5saXN0ZW5lcnNbaV0odW5pdCwgdmFsdWUsIHRvdGFsKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIFRDX0luc3RhbmNlLnByb3RvdHlwZS5kZWZhdWx0X29wdGlvbnMgPSB7XHJcbiAgICAgICAgcmVmX2RhdGU6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgc3RhcnQ6IHRydWUsXHJcbiAgICAgICAgcmVmcmVzaF9pbnRlcnZhbDogMC4xLFxyXG4gICAgICAgIGNvdW50X3Bhc3RfemVybzogdHJ1ZSxcclxuICAgICAgICBjaXJjbGVfYmdfY29sb3I6IFwiIzYwNjg2RlwiLFxyXG4gICAgICAgIHVzZV9iYWNrZ3JvdW5kOiB0cnVlLFxyXG4gICAgICAgIGZnX3dpZHRoOiAwLjA4LFxyXG4gICAgICAgIGJnX3dpZHRoOiAxLFxyXG4gICAgICAgIHRpbWU6IHtcclxuICAgICAgICAgICAgRGF5czoge1xyXG4gICAgICAgICAgICAgICAgc2hvdzogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHRleHQ6IFwi0JTQvdC10LlcIixcclxuICAgICAgICAgICAgICAgIGNvbG9yOiBcIiNGQzBcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBIb3Vyczoge1xyXG4gICAgICAgICAgICAgICAgc2hvdzogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHRleHQ6IFwi0KfQsNGB0L7QslwiLFxyXG4gICAgICAgICAgICAgICAgY29sb3I6IFwiI0ZDMFwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIE1pbnV0ZXM6IHtcclxuICAgICAgICAgICAgICAgIHNob3c6IHRydWUsXHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBcItCc0LjQvdGD0YJcIixcclxuICAgICAgICAgICAgICAgIGNvbG9yOiBcIiNGQzBcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBTZWNvbmRzOiB7XHJcbiAgICAgICAgICAgICAgICBzaG93OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgdGV4dDogXCLQodC10LrRg9C90LRcIixcclxuICAgICAgICAgICAgICAgIGNvbG9yOiBcIiNGQzBcIlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBUaW1lIGNpcmNsZSBjbGFzc1xyXG4gICAgdmFyIFRDX0NsYXNzID0gZnVuY3Rpb24oZWxlbWVudHMsIG9wdGlvbnMpIHtcclxuICAgICAgICB0aGlzLmVsZW1lbnRzID0gZWxlbWVudHM7XHJcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcclxuICAgICAgICB0aGlzLmZvcmVhY2goKTtcclxuICAgIH07XHJcblxyXG4gICAgVENfQ2xhc3MucHJvdG90eXBlLmZvcmVhY2ggPSBmdW5jdGlvbihjYWxsYmFjaykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50cy5lYWNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgaW5zdGFuY2U7XHJcbiAgICAgICAgICAgIHZhciBjdXJfaWQgPSAkKHRoaXMpLmRhdGEoXCJ0Yy1pZFwiKTtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBjdXJfaWQgPT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICAgICAgICAgIGN1cl9pZCA9IGd1aWQoKTtcclxuICAgICAgICAgICAgICAgICQodGhpcykuZGF0YShcInRjLWlkXCIsIGN1cl9pZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBUQ19JbnN0YW5jZV9MaXN0W2N1cl9pZF0gPT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICAgICAgICAgIHZhciBlbGVtZW50X29wdGlvbnMgPSAkKHRoaXMpLmRhdGEoJ29wdGlvbnMnKTtcclxuICAgICAgICAgICAgICAgIHZhciBvcHRpb25zID0gX3RoaXMub3B0aW9ucztcclxuICAgICAgICAgICAgICAgIGlmKHR5cGVvZiBlbGVtZW50X29wdGlvbnMgPT09IFwib2JqZWN0XCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zID0gJC5leHRlbmQodHJ1ZSwge30sIF90aGlzLm9wdGlvbnMsIGVsZW1lbnRfb3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZSA9IG5ldyBUQ19JbnN0YW5jZSh0aGlzLCBvcHRpb25zKTtcclxuICAgICAgICAgICAgICAgIFRDX0luc3RhbmNlX0xpc3RbY3VyX2lkXSA9IGluc3RhbmNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2UgPSBUQ19JbnN0YW5jZV9MaXN0W2N1cl9pZF07XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIF90aGlzLm9wdGlvbnMgIT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZS5zZXRPcHRpb25zKF90aGlzLm9wdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGluc3RhbmNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuXHJcbiAgICBUQ19DbGFzcy5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB0aGlzLmZvcmVhY2goZnVuY3Rpb24oaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgaW5zdGFuY2Uuc3RhcnQoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcblxyXG4gICAgVENfQ2xhc3MucHJvdG90eXBlLnN0b3AgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB0aGlzLmZvcmVhY2goZnVuY3Rpb24oaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgaW5zdGFuY2Uuc3RvcCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuXHJcbiAgICBUQ19DbGFzcy5wcm90b3R5cGUuYWRkTGlzdGVuZXIgPSBmdW5jdGlvbihmKSB7XHJcbiAgICAgICAgdGhpcy5mb3JlYWNoKGZ1bmN0aW9uKGluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIGluc3RhbmNlLmFkZExpc3RlbmVyKGYpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgVENfQ2xhc3MucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB0aGlzLmZvcmVhY2goZnVuY3Rpb24oaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgaW5zdGFuY2UuZGVzdHJveSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuXHJcbiAgICBUQ19DbGFzcy5wcm90b3R5cGUuZW5kID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudHM7XHJcbiAgICB9O1xyXG5cclxuICAgICQuZm4uVGltZUNpcmNsZXMgPSBmdW5jdGlvbihvcHRpb25zKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBUQ19DbGFzcyh0aGlzLCBvcHRpb25zKTtcclxuICAgIH07XHJcbn0oalF1ZXJ5KSk7XHJcblxyXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpeyBcclxuICAgIC8v0LXRgdC70Lgg0YHRgdGL0LvQutCwINC80LXQvdGOINGB0L7QstC/0LDQtNCw0LXRgiDRgSDRgtC10LrRg9GJ0LXQuSDRgdGC0YDQsNC90LjRhtC10Lkg0YLQviDQtNC+0LHQsNCy0LvRj9C10Lwg0LrQu9Cw0YHRgVxyXG4gICAgJCgnbmF2IGEnKS5lYWNoKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgaWYgKHRoaXMuaHJlZiA9PSBkb2N1bWVudC5VUkwpIHtcclxuICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2ItbWVudV9jdXJyZW50Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICAkKCcubmF2LW1lbnVfaXRlbXMnKS5jbGljayhmdW5jdGlvbigpe1xyXG4gICAgICAgIGlmKHdpbmRvdy5pbm5lcldpZHRoIDwgNzI1KSB7XHJcbiAgICAgICAgJCgnLm5hdi1tZW51X2l0ZW1zIGxpJykuc2xpZGVUb2dnbGUoKTtcclxuICAgICAgICB9XHJcbiAgICB9KTsgXHJcbiAgICAkKCcuc2hvdy1tZW51LWFzaWRlJykuY2xpY2soZnVuY3Rpb24oKXsgICAgXHJcbiAgICAgICAgJCgnLmxlZnQtYXNpZGUnKS50b2dnbGUoMzAwKTtcclxuICAgICAgICAkKCcubWVudS1hc2lkZS1hcnJvd2Qgc3ZnJykudG9nZ2xlQ2xhc3MoJ3JvdGF0ZV85MCcpOyAgICBcclxuICAgIH0pO1xyXG4gICAgJCgnLnNob3ctbW9iaWxlLW9yZGVyIGJ1dHRvbicpLmNsaWNrKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgJCgnLmxlZnQtYXNpZGUtb3JkZXInKS5zbGlkZVRvZ2dsZSgpO1xyXG4gICAgfSk7XHJcbiAgICAvL9GE0LjQutGB0LjRgNGD0LXQvCDQsiDQu9C10LLQvtC8INC80LXQvdGOINC30LDQutCw0LfQsCDQv9GA0Lgg0L/RgNC+0LrRgNGD0YLQutC1XHJcbiAgICAkKHdpbmRvdykuc2Nyb2xsKGZ1bmN0aW9uKCkgeyBcclxuICAgICAgICBpZiAoJCh0aGlzKS5zY3JvbGxUb3AoKT40NTMpICQoJy5sZWZ0LWFzaWRlLW9yZGVyJykuY3NzKHsncG9zaXRpb24nOidmaXhlZCcsJ3RvcCc6JzBweCd9KTsgXHJcbiAgICAgICAgZWxzZSAkKCcubGVmdC1hc2lkZS1vcmRlcicpLmNzcyh7J3Bvc2l0aW9uJzonc3RhdGljJ30pOyBcclxuICAgIH0pOyAgXHJcblxyXG4gICAgJChcIi5mb3JtLW9yZGVyLWNvbnN1bHRhdGlvblwiKS5zdWJtaXQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgdmFyIHBob25lID0gJCh0aGlzKS5maW5kKCdpbnB1dFtuYW1lPXBob25lXScpLnZhbCgpOyAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByZWdWID0gL14oWytdP1swLTlcXHMtXFwoXFwpXXs1LDI1fSkqJC9pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYoIXJlZ1YudGVzdChwaG9uZSkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGFsZXJ0KCfQndC10LrQvtGA0YDQtdC60YLQvdGL0Lkg0L3QvtC80LXRgCDRgtC10LvQtdGE0L7QvdCwJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIG5hbWUgPSAkKHRoaXMpLmZpbmQoJ2lucHV0W25hbWU9ZmlvXScpLnZhbCgpO1xyXG4gICAgICAgICAgICB2YXIgcmVnID0gL15b0LAt0Y/QkC3Qr9GR0IFhLXpBLVogLV0rJC87XHJcbiAgICAgICAgICAgIGlmKG5hbWUubGVuZ3RoIDwgMil7XHJcbiAgICAgICAgICAgICAgICBhbGVydCgn0JjQvNGPINC90LUg0LzQtdC90YzRiNC1INC00LLRg9GFINGB0LjQvNCy0L7Qu9C+0LInKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZihuYW1lLmxlbmd0aCA+IDMxKXtcclxuICAgICAgICAgICAgICAgIGFsZXJ0KCfQmNC80Y8g0L3QtSDQsdC+0LvRjNGI0LUgMzAg0YHQuNC80LLQvtC70L7QsicpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKCFyZWcudGVzdChuYW1lKSl7XHJcbiAgICAgICAgICAgICAgICBhbGVydCgn0JjQvNGPINC00L7Qu9C20L3QviDRgdC+0LTQtdGA0LbQsNGC0Ywg0YLQvtC70YzQutC+INGA0YPRgdGB0LrQuNC1INC40LvQuCDQu9Cw0YLQuNC90YHQutC40LUg0LHRg9C60LLRiywg0YLQuNGA0LUgLSAnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICAkKFwiI2xlZnQtZm9ybV9hc2lkZVwiKS5zdWJtaXQoZnVuY3Rpb24oKXtcclxuICAgICAgICB2YXIgcGhvbmUgPSAkKCcjbGVmdC1hc2lkZV9faW5wdXQtcGhvbmUnKS52YWwoKTsgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgIHJlZ1YgPSAvXihbK10/WzAtOVxccy1cXChcXCldezUsMjV9KSokL2k7ICAgICAgICBcclxuICAgICAgICBpZighcmVnVi50ZXN0KHBob25lKSB8fCBwaG9uZSA9PSAnJylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGFsZXJ0KCfQndC10LrQvtGA0YDQtdC60YLQvdGL0Lkg0L3QvtC80LXRgCDRgtC10LvQtdGE0L7QvdCwJyk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIG5hbWUgPSAkKHRoaXMpLmZpbmQoJ2lucHV0W25hbWU9ZmlvXScpLnZhbCgpO1xyXG4gICAgICAgIHZhciByZWcgPSAvXlvQsC3Rj9CQLdCv0ZHQgWEtekEtWiAtXSskLztcclxuICAgICAgICBpZihuYW1lLmxlbmd0aCA8IDIpe1xyXG4gICAgICAgICAgICBhbGVydCgn0JjQvNGPINC90LUg0LzQtdC90YzRiNC1INC00LLRg9GFINGB0LjQvNCy0L7Qu9C+0LInKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZihuYW1lLmxlbmd0aCA+IDMxKXtcclxuICAgICAgICAgICAgYWxlcnQoJ9CY0LzRjyDQvdC1INCx0L7Qu9GM0YjQtSAzMCDRgdC40LzQstC+0LvQvtCyJyk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoIXJlZy50ZXN0KG5hbWUpKXtcclxuICAgICAgICAgICAgYWxlcnQoJ9CY0LzRjyDQtNC+0LvQttC90L4g0YHQvtC00LXRgNC20LDRgtGMINGC0L7Qu9GM0LrQviDRgNGD0YHRgdC60LjQtSDQuNC70Lgg0LvQsNGC0LjQvdGB0LrQuNC1INCx0YPQutCy0YssINGC0LjRgNC1IC0gJyk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHNlcnZpY2UgPSAkKHRoaXMpLmZpbmQoJ2lucHV0W25hbWU9c2VydmljZV0nKTtcclxuICAgICAgICBpZihzZXJ2aWNlLmxlbmd0aCA+IDEwMCkge1xyXG4gICAgICAgICAgICBhbGVydCgn0KPRgdC70YPQs9CwINC90LUg0LHQvtC70LXQtSAxMDAg0YHQuNC80LLQvtC70L7QsicpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgc2l0ZSA9ICQodGhpcykuZmluZCgnaW5wdXRbbmFtZT1zaXRlXScpO1xyXG4gICAgICAgIGlmKHNpdGUubGVuZ3RoID4gMTAwKSB7XHJcbiAgICAgICAgICAgIGFsZXJ0KCfQndCw0LfQstCw0L3QuNC1INGB0LDQudGC0LAg0L3QtSDQsdC+0LvQtdC1IDEwMCDRgdC40LzQstC+0LvQvtCyJyk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9O1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy/Qt9Cw0L/Rg9GB0LrQsNC10Lwg0YfQsNGB0Ysg0L7QsdGA0LDRgtC90L7Qs9C+INC+0YLRgdGH0LXRgtCwLiDQstGA0LXQvNGPINCy0YvRgdGC0LDQstC70Y/QtdGC0YHRjyDQsiDQsNGC0YDQuNCx0YPRgtCw0YUgZGF0YSBodG1sXHJcbiAgICB2YXIgb3B0aW9ucyA9IHtcclxuICAgICAgc2NhbGVDb2xvcjogZmFsc2UsXHJcbiAgICAgIHRyYWNrQ29sb3I6ICcjZmMwJyxcclxuICAgICAgYmFyQ29sb3I6ICcjOTc5Nzk3JyxcclxuICAgICAgbGluZVdpZHRoOiA2LFxyXG4gICAgICBsaW5lQ2FwOiAnYnV0dCcsXHJcbiAgICAgIHNpemU6IDk1XHJcbiAgICB9O1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbigpIHtcclxuICAgICAgdmFyIGNoYXJ0cyA9IFtdO1xyXG4gICAgICBbXS5mb3JFYWNoLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNoYXJ0JyksICBmdW5jdGlvbihlbCkge1xyXG4gICAgICAgIGNoYXJ0cy5wdXNoKG5ldyBFYXN5UGllQ2hhcnQoZWwsIG9wdGlvbnMpKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgIHZhciB0aW1lQ2lyY2xlcyA9ICQoXCIuc29tZVRpbWVyXCIpLlRpbWVDaXJjbGVzKCk7XHJcblxyXG4gICAgLy8gRmFkZSBpbiBhbmQgZmFkZSBvdXQgYXJlIGV4YW1wbGVzIG9mIGhvdyBjaGFpbmluZyBjYW4gYmUgZG9uZSB3aXRoIFRpbWVDaXJjbGVzXHJcbiAgICAkKFwiLmZhZGVJblwiKS5jbGljayhmdW5jdGlvbigpIHtcclxuICAgICAgICB0aW1lQ2lyY2xlcy5lbGVtZW50cy5sYXN0KCkuZmFkZUluKCk7XHJcbiAgICB9KTtcclxuICAgICQoXCIuZmFkZU91dFwiKS5jbGljayhmdW5jdGlvbigpIHtcclxuICAgICAgICB0aW1lQ2lyY2xlcy5lbGVtZW50cy5sYXN0KCkuZmFkZU91dCgpO1xyXG4gICAgfSk7XHJcbiAgICAvLyBTdGFydCBhbmQgc3RvcCBhcmUgbWV0aG9kcyBhcHBsaWVkIG9uIHRoZSBwdWJsaWMgVGltZUNpcmNsZXMgaW5zdGFuY2VcclxuICAgICQoXCIuc3RhcnRUaW1lclwiKS5jbGljayhmdW5jdGlvbigpIHtcclxuICAgICAgICAkKFwiLnNvbWVUaW1lclwiKS5lcSgxKS5UaW1lQ2lyY2xlcygpLnN0YXJ0KCk7XHJcbiAgICB9KTtcclxuICAgICQoXCIuc3RvcFRpbWVyXCIpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICQoXCIuc29tZVRpbWVyXCIpLmVxKDEpLlRpbWVDaXJjbGVzKCkuc3RvcCgpO1xyXG4gICAgfSk7ICAgICBcclxufSk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
